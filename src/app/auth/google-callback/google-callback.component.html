<!-- Google Redirect Loader -->
<div
  *ngIf="googleRedirecting"
  class="flex items-center justify-center min-h-screen bg-gray-100"
  role="status"
  aria-live="polite"
>
  <div class="text-center animate-fade-in">
    <svg
      class="mx-auto h-16 w-16 text-blue-500 animate-spin"
      fill="none"
      viewBox="0 0 24 24"
    >
      <circle
        class="opacity-25"
        cx="12"
        cy="12"
        r="10"
        stroke="currentColor"
        stroke-width="4"
      ></circle>
      <path
        class="opacity-75"
        fill="currentColor"
        d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"
      ></path>
    </svg>
    <p class="mt-4 text-lg font-medium text-gray-700">
      Redirecting after Google authentication...
    </p>
  </div>
</div>

<!-- Login Form -->
<div
  *ngIf="!googleRedirecting"
  class="max-w-md mx-auto mt-0 p-20 bg-white rounded-lg shadow-md"
>
  <!-- Success Message -->
  <div
    *ngIf="successMessage"
    class="bg-green-100 text-green-800 border border-green-300 rounded p-2 mb-4 text-center animate-fade-in-out transition-opacity duration-1000 ease-in-out"
  >
    {{ successMessage }}
  </div>

  <!-- Error Message -->
  <div *ngIf="errorMessage" class="text-red-600 text-center mb-4 text-sm">
    {{ errorMessage }}
  </div>

  <h2 class="text-2xl font-semibold mb-6 text-center">Login</h2>

  <form (ngSubmit)="onSubmit(loginForm)" #loginForm="ngForm" class="space-y-5">
    <!-- Email Field -->
    <div>
      <label for="email" class="block mb-1 font-medium text-gray-700">Email</label>
      <input
        type="email"
        id="email"
        name="email"
        [(ngModel)]="email"
        required
        email
        #emailInput="ngModel"
        placeholder="Enter gmail"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <div *ngIf="loginForm.submitted && emailInput.invalid" class="text-red-600 mt-1 text-sm">
        Email is required.
      </div>
    </div>

    <!-- Password Field -->
    <div>
      <label for="password" class="block mb-1 font-medium text-gray-700">Password</label>
      <input
        type="password"
        id="password"
        name="password"
        [(ngModel)]="password"
        required
        minlength="6"
        #passwordInput="ngModel"
        placeholder="********"
        class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
      />
      <div *ngIf="loginForm.submitted && passwordInput.invalid" class="text-red-600 mt-1 text-sm">
        Password is required.
      </div>
    </div>

    <!-- Submit Button -->
    <button
      type="submit"
      class="w-full bg-blue-600 text-white font-semibold py-2 rounded-md hover:bg-blue-700 transition"
    >
      Login
    </button>

    <!-- Google Login -->
    <div class="text-center mt-4">
      <button
        type="button"
        (click)="loginWithGoogle()"
        class="inline-flex items-center justify-center w-full py-2 border border-gray-300 rounded-md hover:bg-gray-100 transition"
      >
        <img
          src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg"
          alt="Google logo"
          class="w-5 h-5 mr-2"
        />
        Login with Google
      </button>
    </div>

    <!-- Forgot Password -->
    <div class="text-center mt-4 text-sm">
      <a routerLink="/forgot-password" class="text-blue-600 hover:underline">Forgot Password?</a>
    </div>

    <!-- Register -->
    <div class="text-center mt-2 text-sm">
      Don't have an account?
      <a routerLink="/register" class="text-blue-600 hover:underline font-medium">Register here</a>
    </div>
  </form>
</div>
